#cloud-config
##
 # Ubuntu box for web dev clients
 # hosted with Apache in Docker containers
##
users:
  - name: root
  - shell: /bin/bash
    ssh-authorized-keys:
       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCdricXlx0craBMhk3y/AqueloNn2aWA9ItSOcJjOTAqbMkxfbUcyCCUta95XuNLAprX6s7Xn+qcSh+75uF6j93yRkvOiUcjg5pYntWF62xStY4ImZF9JQgKLWQ1ogerWRiudr8eNFHx0pGFPIfAhKVFIxBoZK0ROiBAz014DQOqxgJH/XXhmEodZFuxzgud67M05L0ukzQpeqQI6UWB16kAYQ6NtBoLG/43Pd+iUUQEZiQ2Z8Ge49OYS/4MLQnPOrAGJH+eQib3cRrUoqw7z0vldzAb9kjw+4BmtzZfw7dM7IXpUMkbwD6YcB1jR0NzyJ0hU57+6FNJr2BA9Asi7ux+iI49sdBMQqMhMJcdyyta5i/mbAIFy2b+KKeUkwYqlW/yml3XKQX9oIDbRmqnNeldz//X8109uA0E31bk2pXDHM8SkBkejUGshOumgzARvfM9CGabJ3ZnPSczrANTif53KTKRFy2DVi6RE4g4U5HuB2tLg7QERAdABqfd9Loioxjyd/ANGiTDCBxn8uiSrQKDFQxC3Ug2Qi5R8NqHZ72p4MW4hxjiUR4e3pLMtanU8ki/AANSEDGKOwK/9h7DJ9xign6umNo38wp9LCexwX/Fl8FBGQ/3HHZ9eLp+M8I9P09AWY468FWvibMVLIrVS4kbS1tJ5l63YY24dwHm/XIEQ== peter@phpete.me
       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCzJFBcXrXxuezVAiub3MsdI05EcHvTJ3HvYkPNRS1Tl7Lfy/4ZOaWit/rOHAdvImnA9AMMBfPic7HjIlW4tTidWclPy3OM45EiOquGwM3WtPHGdRu2HvWwvL+QxpA7ANxp9CtooOEgTKkaBXC8zVhOYZa7Kiu0cJgJlUA/WHU1XXQnAxl8X3nvMKhlfJZSxbwkvk8o6S51JIHFnLxkVywv83smyuSNhEh9pFSOPeaeR85zGJWJtZXF5Td7T9h0sF2TxjJObZ3FGDalGUgJgQyg0zleWfc3EvMAbYTmeK6sQro1IdBYxAtQM5i9HPCq0sfFnGSDmRsRSPIem0cO/QCzNATm/kAn/yLtJJAOy4DA4ESMt5ItKgo9BiOdd6gGaCShpe1d4bF28hYNvMLvvHq57yn8pUuet1+232jGrJHoMElgBELmw81G+JdZuB8BqBvMJA7/JgbMgzu8xjvIo0s8Po9o/CKYCYQsAEhev2JoLG3TEdo1ZEq2ckfr86Yql5MHUu2AtKtHRbrsaHZ7R1fJCA/abLwdN0l0v2JqahvvVwutMgYjYty2Z9j//d8jVd+GQ6DHF+oPnrtKa1g9AuWvEVfV+ppxpJkOpfcFsgOoR9MO7tzWLG9WZXqkh8xiASn0VdEJAjiARd53B0iSj5zQHHqRjN9vTrkoSVbdlggSaQ== peter@phpete.me
  - name: peter
    groups: sudo, www-data
    shell: /bin/bash
    ssh-authorized-keys:
       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCdricXlx0craBMhk3y/AqueloNn2aWA9ItSOcJjOTAqbMkxfbUcyCCUta95XuNLAprX6s7Xn+qcSh+75uF6j93yRkvOiUcjg5pYntWF62xStY4ImZF9JQgKLWQ1ogerWRiudr8eNFHx0pGFPIfAhKVFIxBoZK0ROiBAz014DQOqxgJH/XXhmEodZFuxzgud67M05L0ukzQpeqQI6UWB16kAYQ6NtBoLG/43Pd+iUUQEZiQ2Z8Ge49OYS/4MLQnPOrAGJH+eQib3cRrUoqw7z0vldzAb9kjw+4BmtzZfw7dM7IXpUMkbwD6YcB1jR0NzyJ0hU57+6FNJr2BA9Asi7ux+iI49sdBMQqMhMJcdyyta5i/mbAIFy2b+KKeUkwYqlW/yml3XKQX9oIDbRmqnNeldz//X8109uA0E31bk2pXDHM8SkBkejUGshOumgzARvfM9CGabJ3ZnPSczrANTif53KTKRFy2DVi6RE4g4U5HuB2tLg7QERAdABqfd9Loioxjyd/ANGiTDCBxn8uiSrQKDFQxC3Ug2Qi5R8NqHZ72p4MW4hxjiUR4e3pLMtanU8ki/AANSEDGKOwK/9h7DJ9xign6umNo38wp9LCexwX/Fl8FBGQ/3HHZ9eLp+M8I9P09AWY468FWvibMVLIrVS4kbS1tJ5l63YY24dwHm/XIEQ== peter@phpete.me
       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCzJFBcXrXxuezVAiub3MsdI05EcHvTJ3HvYkPNRS1Tl7Lfy/4ZOaWit/rOHAdvImnA9AMMBfPic7HjIlW4tTidWclPy3OM45EiOquGwM3WtPHGdRu2HvWwvL+QxpA7ANxp9CtooOEgTKkaBXC8zVhOYZa7Kiu0cJgJlUA/WHU1XXQnAxl8X3nvMKhlfJZSxbwkvk8o6S51JIHFnLxkVywv83smyuSNhEh9pFSOPeaeR85zGJWJtZXF5Td7T9h0sF2TxjJObZ3FGDalGUgJgQyg0zleWfc3EvMAbYTmeK6sQro1IdBYxAtQM5i9HPCq0sfFnGSDmRsRSPIem0cO/QCzNATm/kAn/yLtJJAOy4DA4ESMt5ItKgo9BiOdd6gGaCShpe1d4bF28hYNvMLvvHq57yn8pUuet1+232jGrJHoMElgBELmw81G+JdZuB8BqBvMJA7/JgbMgzu8xjvIo0s8Po9o/CKYCYQsAEhev2JoLG3TEdo1ZEq2ckfr86Yql5MHUu2AtKtHRbrsaHZ7R1fJCA/abLwdN0l0v2JqahvvVwutMgYjYty2Z9j//d8jVd+GQ6DHF+oPnrtKa1g9AuWvEVfV+ppxpJkOpfcFsgOoR9MO7tzWLG9WZXqkh8xiASn0VdEJAjiARd53B0iSj5zQHHqRjN9vTrkoSVbdlggSaQ== peter@phpete.me
  - name: git
    groups: www-data
    shell: /bin/bash
    ssh-authorized-keys:
       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCdricXlx0craBMhk3y/AqueloNn2aWA9ItSOcJjOTAqbMkxfbUcyCCUta95XuNLAprX6s7Xn+qcSh+75uF6j93yRkvOiUcjg5pYntWF62xStY4ImZF9JQgKLWQ1ogerWRiudr8eNFHx0pGFPIfAhKVFIxBoZK0ROiBAz014DQOqxgJH/XXhmEodZFuxzgud67M05L0ukzQpeqQI6UWB16kAYQ6NtBoLG/43Pd+iUUQEZiQ2Z8Ge49OYS/4MLQnPOrAGJH+eQib3cRrUoqw7z0vldzAb9kjw+4BmtzZfw7dM7IXpUMkbwD6YcB1jR0NzyJ0hU57+6FNJr2BA9Asi7ux+iI49sdBMQqMhMJcdyyta5i/mbAIFy2b+KKeUkwYqlW/yml3XKQX9oIDbRmqnNeldz//X8109uA0E31bk2pXDHM8SkBkejUGshOumgzARvfM9CGabJ3ZnPSczrANTif53KTKRFy2DVi6RE4g4U5HuB2tLg7QERAdABqfd9Loioxjyd/ANGiTDCBxn8uiSrQKDFQxC3Ug2Qi5R8NqHZ72p4MW4hxjiUR4e3pLMtanU8ki/AANSEDGKOwK/9h7DJ9xign6umNo38wp9LCexwX/Fl8FBGQ/3HHZ9eLp+M8I9P09AWY468FWvibMVLIrVS4kbS1tJ5l63YY24dwHm/XIEQ== peter@phpete.me
       - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCzJFBcXrXxuezVAiub3MsdI05EcHvTJ3HvYkPNRS1Tl7Lfy/4ZOaWit/rOHAdvImnA9AMMBfPic7HjIlW4tTidWclPy3OM45EiOquGwM3WtPHGdRu2HvWwvL+QxpA7ANxp9CtooOEgTKkaBXC8zVhOYZa7Kiu0cJgJlUA/WHU1XXQnAxl8X3nvMKhlfJZSxbwkvk8o6S51JIHFnLxkVywv83smyuSNhEh9pFSOPeaeR85zGJWJtZXF5Td7T9h0sF2TxjJObZ3FGDalGUgJgQyg0zleWfc3EvMAbYTmeK6sQro1IdBYxAtQM5i9HPCq0sfFnGSDmRsRSPIem0cO/QCzNATm/kAn/yLtJJAOy4DA4ESMt5ItKgo9BiOdd6gGaCShpe1d4bF28hYNvMLvvHq57yn8pUuet1+232jGrJHoMElgBELmw81G+JdZuB8BqBvMJA7/JgbMgzu8xjvIo0s8Po9o/CKYCYQsAEhev2JoLG3TEdo1ZEq2ckfr86Yql5MHUu2AtKtHRbrsaHZ7R1fJCA/abLwdN0l0v2JqahvvVwutMgYjYty2Z9j//d8jVd+GQ6DHF+oPnrtKa1g9AuWvEVfV+ppxpJkOpfcFsgOoR9MO7tzWLG9WZXqkh8xiASn0VdEJAjiARd53B0iSj5zQHHqRjN9vTrkoSVbdlggSaQ== peter@phpete.me
  - name: docker
    groups: www-data
chpasswd:
  list: |
    root:changeme
    peter:changeme
  expire: False
packages:
  - apache2
  - git
  - ruby-full
  - openssl
  - apt-transport-https
  - ca-certificates
runcmd:
  - git clone https://github.com/peterlopez/scripts.git /home/peter/
  - curl -L "https://github.com/docker/compose/releases/download/1.8.1/docker-compose-$(uname -s)-$(uname -m)" > /usr/local/bin/docker-compose
  - chmod +x /usr/local/bin/docker-compose
  - sed -i -e '/^PermitRootLogin/s/^.*$/PermitRootLogin prohibit-password/' /etc/ssh/sshd_config
  - service ssh restart
