[ $(command -v brew) == "" ] && echo "Error: must install Homebrew before running this script" && exit 1
[ ! -f ~/.ssh/id_rsa ] && echo "Error: must install SSH key at ~/.ssh/id_rsa before running this script" && exit 1

# Install GitHub CLI
brew install gh

# Set up GitHub CLI
gh auth login
gh auth setup-git

# Clone scripts
gh repo clone peterlopez/scripts

# Clone dotfiles
gh repo clone peterlopez/dotfiles

# Set up dotfiles
~/scripts/shell/setup-dotfiles ~/dotfiles

# Set macOS preferences
~/scripts/macos/set-mac-preferences

# Install Xcode command line tools
xcode-select --install

# Install Homebrew packages
brew bundle install --file=~/dotfiles/brew/Brewfile

# Set up keychain for SSH key
ssh-add --apple-use-keychain ~/.ssh/id_rsa
